import{j as a}from"./vendor-gzd0YkcT.js";import{_ as U}from"./main-BDaPCaEg.js";import{g as J,i as Q,a as X,s as L,d as w,b as z,c as A,e as R,q as F,f as N,w as K,h as Z,u as aa,j as ea,k as ta,l as oa,o as sa,m as ia,n as ra,T as q,p as na}from"./firebase-BjZE1XrJ.js";import{c as E,g as $,M,d as C,w as _,s as W,e as S,r as la,f as ca,N as D,b as da,h as pa}from"./main-gMfxXfMT.js";const ua=new Set(["wtaype.web.app","localhost","192.168.18.62","wtaype.me"]),ma=ua.has(window.location.hostname),j=ma?Q({apiKey:"AIzaSyBAIwiBxytsybA4jCjcOpNHqfIeQajVO6M",authDomain:"wtaype.firebaseapp.com",projectId:"wtaype",storageBucket:"wtaype.firebasestorage.app",messagingSenderId:"870707680359",appId:"1:870707680359:web:422633cafe24ef1734f0c2"}):null,T=j?X(j):null,v=j?J(j):null;function G(){const c={db:"smiles",rol:"smile"},b=(s,p,f)=>`<div id="${s}" class="wiModal authMod"><div class="modalBody"><button class="modalX">&times;</button><div class="modalMain"><div class="logo"><img src="./smile.avif"></div><h2>${p}</h2><form id="${s.replace("Modal","Form")}">${f}</form></div></div></div>`,g=(s,p,f,P,o=!1)=>`<div class="grupo"><i class="fas fa-${s}"></i><input type="${p}" id="${f}" placeholder="${P}" required>${o?'<i class="fas fa-eye tgPass"></i>':""}</div>`,u={login:b("loginModal","Login",g("envelope","text","email","Email o usuario")+g("lock","password","password","Contraseña",!0)+'<button type="button" id="Login" class="btnAuth inactivo">Iniciar Sesión</button><div class="links"><span class="olvidastePass">¿Olvidaste tu contraseña?</span><span class="crearCuenta">Crear cuenta</span></div>'),registro:b("registroModal","Crear Cuenta",g("envelope","email","regEmail","Email")+g("user","text","regUsuario","Usuario")+g("user-tie","text","regNombre","Nombre")+g("user-tie","text","regApellidos","Apellidos")+g("lock","password","regPassword","Contraseña",!0)+g("lock","password","regPassword1","Confirmar",!0)+'<div class="grupo grupoCheck"><label><input type="checkbox" id="regTerminos" required><span>Acepto los <a href="/terminos.html" target="_blank" rel="noopener noreferrer">términos y condiciones</a></span></label></div><button type="button" id="Registrar" class="btnAuth inactivo">Registrarme</button><div class="links"><span class="conCuenta">Ya tengo cuenta</span></div>').replace("authMod","authMod regMod"),reset:b("recuperarModal","Restablecer","<p>Ingresa tu Email o usuario:</p>"+g("envelope","text","recEmail","Email o usuario")+'<button type="button" id="Recuperar" class="btnAuth inactivo">Enviar enlace</button><div class="links"><span class="volverLogin"><i class="fas fa-arrow-left"></i> Volver</span></div>')},m=`.authMod .modalBody{max-width:28vw;min-width:320px;padding:0;background:var(--bg);border-radius:1.5vh;box-shadow:0 10px 40px rgba(0,0,0,.15);animation:mIn .3s ease}@keyframes mIn{from{transform:translateY(-30px) scale(.9);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}.regMod .modalBody{max-width:40vw}.modalMain{padding:3vh 2.5vw;display:flex;flex-direction:column;align-items:center}.logo{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:2vh 0 1.5vh;box-shadow:0 8px 24px var(--bxs);background:linear-gradient(135deg,var(--mco),var(--hv));animation:lf 3s ease-in-out infinite}@keyframes lf{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}.logo:hover{transform:scale(1.05) rotate(5deg)}.logo img{width:90%;transition:transform .3s}.logo:hover img{transform:scale(1.1)}h2{font:700 1.8rem var(--ff_P);color:var(--mco);margin:.5vh 0 2vh;text-align:center}form{width:100%;display:flex;flex-direction:column;gap:1.5vh}.grupo{position:relative;width:100%;animation:fiu .4s ease backwards}.grupo:nth-child(n){animation-delay:calc(var(--i, 0) * .05s)}@keyframes fiu{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.grupo i{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:var(--mco);opacity:.8;font-size:1.1rem;z-index:2;pointer-events:none;transition:all .3s}.grupo:focus-within i{opacity:1;color:var(--hv);transform:translateY(-50%) scale(1.1)}.tgPass{left:auto!important;right:1rem!important;cursor:pointer;pointer-events:all!important;z-index:3!important;opacity:.6;color:var(--txe)}.tgPass:hover{opacity:1;color:var(--mco);transform:translateY(-50%) scale(1.15)!important}input{width:100%;padding:1.3vh 3.5rem 1.3vh 3rem;border-radius:.8vh;border:1.5px solid var(--bdr);background:var(--wb);color:var(--tx);font-size:.95rem;transition:all .3s;outline:0;box-sizing:border-box}input:hover{border-color:var(--mco);transform:translateY(-1px)}input:focus{border-color:var(--mco);box-shadow:0 0 0 3px var(--bxs),0 4px 12px rgba(0,0,0,.08);transform:translateY(-2px);background:var(--F)}input::placeholder{color:var(--txe);opacity:.6}.btnAuth{width:100%;padding:1.4vh 1.5vw;background:linear-gradient(135deg,var(--mco),var(--hv));color:var(--txa);border:0;border-radius:.8vh;font-weight:600;font-size:1rem;cursor:pointer;box-shadow:0 6px 20px var(--bxs);transition:all .3s;position:relative;overflow:hidden;animation:fiu .4s ease .4s backwards}.btnAuth::before{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(255,255,255,.2);transform:translate(-50%,-50%);transition:width .6s,height .6s}.btnAuth:hover::before{width:300px;height:300px}.btnAuth:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 10px 30px var(--bxs)}.btnAuth:active{transform:translateY(-1px) scale(.98)}.btnAuth.loading{opacity:.8;cursor:wait;pointer-events:none;animation:pul 1.5s ease-in-out infinite}@keyframes pul{0%,100%{opacity:.8}50%{opacity:.6}}.btnAuth.inactivo{opacity:.65;cursor:not-allowed;pointer-events:none;filter:grayscale(40%)}.btnAuth i{margin-right:.3vw;color:var(--bg7)!important}.links{width:100%;display:flex;justify-content:space-between;margin-top:1.5vh;gap:1vh;animation:fiu .4s ease .45s backwards}.links span{color:var(--mco);cursor:pointer;padding:.6vh .8vw;font-size:.95rem;font-weight:500;border-radius:.5vh;transition:all .25s;position:relative}.links span::after{content:'';position:absolute;bottom:0;left:50%;width:0;height:2px;background:var(--mco);transition:all .3s;transform:translateX(-50%)}.links span:hover{color:var(--hv);transform:translateY(-2px)}.links span:hover::after{width:100%}p{color:var(--tx);font-size:.95rem;margin:1.5vh 0 .8vh;opacity:.85;font-weight:500}#registroForm{display:grid;grid-template-columns:1fr 1fr;gap:1.5vh 1.5vw}#registroForm .btnAuth,#registroForm .links{grid-column:1/-1;margin-top:1vh}@media (max-width:1200px){.authMod .modalBody{max-width:35vw}.regMod .modalBody{max-width:50vw}}@media (max-width:768px){.authMod .modalBody{max-width:98vw}.regMod .modalBody{max-width:98vw}.modalMain{padding:2.5vh 5vw}h2{font-size:1.5rem}.logo{width:70px;height:70px}input{padding:1.2vh 3rem 1.2vh 2.5rem}.grupo i{left:.8rem}.tgPass{right:.8rem!important}.btnAuth{padding:1.5vh 4vw;font-size:.95rem}#registroForm{display:flex;flex-direction:column;gap:1.5vh}}.grupoCheck label{display:flex;align-items:center;gap:.8vh;font-size:.9rem;color:var(--tx);}.grupoCheck input[type="checkbox"]{width:16px;height:16px;accent-color:var(--mco);cursor:pointer;}.grupoCheck a{color:var(--mco);text-decoration:underline;}.authMod h2,.authMod a,.authMod input::placeholder,.authMod i,.authMod span{color:var(--bg2);}.authMod input:focus::placeholder,.authMod input:focus{color:var(--mco)}`;let d=!1;const h=()=>{d||(a("body").append(Object.values(u).join("")),d=!0,I())};!a(".wiAuthCss").length&&a("head").append(`<style class="wiAuthCss">${m}</style>`);const x={regEmail:[s=>s.toLowerCase().trim(),s=>/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(s)||"Email inválido"],regUsuario:[s=>s.toLowerCase().replace(/[^a-z0-9_]/g,"").trim(),s=>s.length>=4||"Usuario 4-20 caracteres"],regNombre:[s=>s.trim(),s=>s.length>0||"Ingrese nombre"],regApellidos:[s=>s.trim(),s=>s.length>0||"Ingrese apellidos"],regPassword:[s=>s,s=>s.length>=6||"Mínimo 6 caracteres"],regPassword1:[s=>s,s=>s===a("#regPassword").val()||"No coinciden"]},I=()=>{let s=!1,p=!1,f=!1;a(document).off("click.wa",".tgPass").on("click.wa",".tgPass",function(){const o=a(this).siblings("input");o.attr("type",o.attr("type")==="password"?"text":"password"),a(this).toggleClass("fa-eye fa-eye-slash")}),a(document).off("input.wa","#regUsuario,#regEmail,#email,#recEmail").on("input.wa","#regUsuario,#regEmail,#email,#recEmail",function(){a(this).val(a(this).val().toLowerCase())}),[["#password","#Login"],["#regPassword1","#Registrar"],["#recEmail","#Recuperar"]].forEach(([o,r])=>{a(document).off("input.wa keyup.wa",o).on("input.wa keyup.wa",o,l=>{a(r).removeClass("inactivo"),l.key==="Enter"&&a(r).click()})}),Object.entries(x).forEach(([o,[r,l]])=>{a(document).off("blur.wa",`#${o}`).on("blur.wa",`#${o}`,function(){const e=r(a(this).val());a(this).val(e);const t=l(e);t!==!0&&C(this,t,"error",2500)})}),a(document).off("blur.wa focus.wa","#regUsuario").on("blur.wa focus.wa","#regUsuario",async function(){const o=a(this).val().trim();if(o.includes("@")){C(this,"Usuario no puede contener @","error",2500),s=!1;return}if(o.length>=3)try{const r=await A(w(v,c.db,o));s=!r.exists(),C(this,`Usuario ${r.exists()?"no disponible ❌":"disponible ✅"}`,s?"success":"error",3e3)}catch(r){console.error(r)}}),a(document).off("blur.wa focus.wa","#regEmail").on("blur.wa focus.wa","#regEmail",async function(){const o=a(this).val().trim();if(o.length>0&&!o.includes("@")){C(this,"Debe ser un email válido","error",2500),p=!1;return}if(o.length>=3&&o.includes("@"))try{const r=await R(F(N(v,c.db),K("email","==",o)));p=r.empty,C(this,`Email ${r.empty?"disponible ✅":"no disponible ❌"}`,p?"success":"error",3e3)}catch(r){console.error(r)}}),a(document).off("click.wa","#Registrar").on("click.wa","#Registrar",async function(){if(f)return;if(!a("#regTerminos").is(":checked")){C(a("#regTerminos")[0],"Debes aceptar los términos y condiciones","error",2500);return}f=!0,_(this,!0,"Registrando");const o=[[s,a("#regUsuario")[0],"Usuario no disponible"],[p,a("#regEmail")[0],"Email no disponible"],...Object.entries(x).map(([r,[l,e]])=>{const t=a(`#${r}`),i=l(t.val()),n=e(i);return[n===!0,t[0],n!==!0?n:""]})];for(const[r,l,e]of o)if(!r&&e){_(this,!1),C(l,e,"error",2500),l.focus(),f=!1;return}try{const[r,l,e,t,i]=["regEmail","regUsuario","regNombre","regApellidos","regPassword"].map(k=>a(`#${k}`).val().trim()),{user:n}=await Z(T,r,i);await Promise.all([aa(n,{displayName:l}),ea(n)]);const y={usuario:l,email:r,nombre:e,apellidos:t,rol:c.rol,uid:n.uid,terminos:!0,tema:localStorage.wiTema};await L(w(v,c.db,l),{...y,creado:z()}),(await U(async()=>{const{personal:k}=await Promise.resolve().then(()=>ga);return{personal:k}},void 0)).personal(y)}catch(r){M({"auth/email-already-in-use":"Email ya registrado","auth/weak-password":"Contraseña débil"}[r.code]||r.message,"error"),console.error(r)}finally{_(this,!1),f=!1}}),a(document).off("click.wa","#Login").on("click.wa","#Login",async function(){_(this,!0,"Iniciando");try{const[o,r]=["#email","#password"].map(t=>a(t).val().trim());let l=o;if(!o.includes("@")){const t=await A(w(v,c.db,o));if(!t.exists())throw new Error("Usuario no encontrado");l=t.data().email}await ta(T,l,r);const e=l.includes("@")?(await A(w(v,c.db,T.currentUser.displayName))).data():(await A(w(v,c.db,o))).data();e.tema&&(localStorage.wiTema=e.tema,O(e.tema)),W("wiSmile",e,450),S("loginModal")}catch(o){M({"auth/invalid-credential":"Contraseña incorrecta","auth/invalid-email":"Email no válido","auth/missing-email":"Usuario no registrado"}[o.code]||o.message,"error"),console.error(o)}finally{_(this,!1)}}),a(document).off("click.wa","#Recuperar").on("click.wa","#Recuperar",async function(){_(this,!0,"Enviando");try{const o=a("#recEmail").val().trim();let r=o;if(!o.includes("@")){const l=await A(w(v,c.db,o));if(!l.exists())throw new Error("Usuario no encontrado");r=l.data().email}await oa(T,r),M("✅ Email enviado para restablecer contraseña","success")}catch(o){M(o.message||"Error al enviar email","error"),console.error(o)}finally{_(this,!1)}});const P={crearCuenta:()=>{E("registroModal"),S("loginModal")},conCuenta:()=>{E("loginModal"),S("registroModal")},olvidastePass:()=>{E("recuperarModal"),S("loginModal")},volverLogin:()=>{E("loginModal"),S("recuperarModal")}};a(document).off("click.wa",".crearCuenta,.conCuenta,.olvidastePass,.volverLogin").on("click.wa",".crearCuenta,.conCuenta,.olvidastePass,.volverLogin",function(){P[a(this).attr("class").split(" ")[0]]()})};a(document).off("click.wa",".login,.registrar").on("click.wa",".login,.registrar",function(s){s.preventDefault(),h(),setTimeout(()=>E(a(this).hasClass("login")?"loginModal":"registroModal"),100)});function O(s){if(!s)return;const[p,f]=s.split("|");document.documentElement.dataset.theme=p,a('meta[name="theme-color"]').attr("content",f),a(".tema").removeClass("mtha").filter(`[data-ths="${s}"]`).addClass("mtha")}a(document).off("click.wa",".tema").on("click.wa",".tema",async function(){const s=localStorage.wiTema,p=$("wiSmile"),f=s.split("|")[0];if(p)try{await L(w(v,c.db,p.usuario),{tema:s,actualizado:z()},{merge:!0}),M(`Tema ${f} Guardado ✅`)}catch(P){console.error(P)}})}G();const B=Object.freeze(Object.defineProperty({__proto__:null,auth:T,onAuthStateChanged:sa,signOut:ia,wiAuth:G},Symbol.toStringTag,{value:"Module"}));function V(c){M?.("Bienvenido "+c.nombre),a(".wiauth").html(`
    <div class="sesion">
      <img src="${c.imagen||"./smile.avif"}" alt="${c.nombre}"><span>${c.nombre}</span>
    </div>
    <button class="bt_salir"><i class="fas fa-sign-out-alt"></i> <span> Salir </span></button>
  `)}(()=>{let c=$("wiSmile");c?g(c):b();function b(){a(".wiauth").html(`
      <button class="wibtn_auth registrar"><i class="fas fa-user-plus"></i><span>Registrar</span></button>
      <button class="wibtn_auth login"><i class="fas fa-sign-in-alt"></i><span>Login</span></button>
  `)}async function g(u){V(u);const{auth:m,onAuthStateChanged:d}=await U(async()=>{const{auth:h,onAuthStateChanged:x}=await Promise.resolve().then(()=>B);return{auth:h,onAuthStateChanged:x}},void 0);d(m,h=>{if(!h)return la("wiSmile"),b()})}window.addEventListener("wiFresh",u=>g(u.detail)),a(document).on("click",".bt_salir",async()=>{const{auth:u,signOut:m}=await U(async()=>{const{auth:d,signOut:h}=await Promise.resolve().then(()=>B);return{auth:d,signOut:h}},void 0);await m(u),["wiflash","wiTema"].map(d=>[d,$(d)]).concat(localStorage.clear())&&localStorage.setItem("wiflash",JSON.stringify($("wiflash")))&&localStorage.setItem("wiTema",JSON.stringify($("wiTema"))),location.reload()})})();const ga=Object.freeze(Object.defineProperty({__proto__:null,personal:V},Symbol.toStringTag,{value:"Module"})),ya=()=>{const c="proyectos",b=pa(q),g=4,u=8;let m=[],d=[],h=0,x=!!$("wiSmile");const I=[{titulo:"DSCTO - Calculadora Móvil",img:"https://i.postimg.cc/dq8nVhCx/Dscto.png",descripcion:"App para cálculos rápidos de descuentos y ajustes",url:"https://dscto.blogspot.com/",tags:["JavaScript","PWA","Firebase"]},{titulo:"CODEWIL - Optimizador de Código",img:"https://i.postimg.cc/CSQcPTYm/Codewil.png",descripcion:"Herramienta para optimizar y embellecer código",url:"https://codewil.blogspot.com/",tags:["React","Node.js","API"]},{titulo:"WICOLORS - Paleta de Colores",img:"https://i.postimg.cc/FhkDwWHm/Wiicolors.png",descripcion:"Generador inteligente de paletas de colores",url:"https://wicolors.blogspot.com/",tags:["Vue.js","Design","CSS"]}],O=e=>{const t=b?.get?.(e,"date")||b?.get?.(e,"full")||"";if(/^\d{4}-\d{2}-\d{2}/.test(t))return t.slice(0,10);const i=e?.toDate?.()||typeof e=="string"&&new Date(e);return i&&!isNaN(i)?i.toISOString().slice(0,10):""},s=e=>b?.save?.(e)||q.fromDate(new Date(e?`${e}T00:00:00`:Date.now())),p=e=>(e||"").toString().toLowerCase(),f=e=>e.split(",").map(t=>t.trim()).filter(Boolean);a("#proyectos").html(`
    <div class="proyectos_container">
      <section class="proyectos_hero">
        <h1 class="hero_title">Mis <span class="gradient_text">Proyectos</span></h1>
        <p class="hero_subtitle">Explora mi colección de proyectos web, móviles y herramientas desarrolladas con las últimas tecnologías</p>
      </section>
      <section class="proyectos_destacados">
        <div class="section_header"><h2 class="section_title">Proyectos Destacados</h2><div class="section_line"></div></div>
        <div class="destacados_grid" id="destacadosGrid">${[1,2,3].map(()=>'<div class="skeleton_card"><div class="skeleton_img shimmer"></div><div class="skeleton_text shimmer"></div><div class="skeleton_text short shimmer"></div></div>').join("")}</div>
      </section>
      <section class="todos_proyectos_section">
        <div class="section_header">
          <h2 class="section_title h1pro">Todos mis Proyectos</h2><div class="section_line"></div>
          <p class="section_descripcion">Cada proyecto representa un desafío superado, una tecnología dominada y una solución creada con pasión por el desarrollo</p>
          <div class="wiauth dpn"><div class="login">Login</div><div class="bt_salir">Salir</div></div>
        </div>
        <div class="search_section">
          <div class="search_wrapper">
            <i class="fas fa-search search_icon"></i>
            <input type="text" id="buscarProyecto" class="search_input">
            <button class="search_clear" id="clearSearch" style="display:none;"><i class="fas fa-times"></i></button>
          </div>
        </div>
        <div class="filtros_section">
          <div class="filtros_wrapper">
        ${[{cat:"all",ico:"layer-group",txt:"Todos los Proyectos",type:"s"},{cat:"web",ico:"globe",txt:"Web Apps",type:"s"},{cat:"mobile",ico:"mobile-alt",txt:"Mobile",type:"s"},{cat:"windows",ico:"windows",txt:"Windows",type:"b"},{cat:"educacion",ico:"graduation-cap",txt:"Educación",type:"s"},{cat:"diseno",ico:"palette",txt:"Diseño",type:"s"},{cat:"devs",ico:"user-astronaut",txt:"Devs",type:"s"},{cat:"tools",ico:"tools",txt:"Herramientas",type:"s"},{cat:"camino",ico:"hourglass-half",txt:"Camino",type:"s"}].map(e=>`<button class="filtro_btn ${e.cat==="all"?"active":""}" data-categoria="${e.cat}"><i class="fa${e.type} fa-${e.ico}"></i> ${e.txt}</button>`).join("")}
          </div>
          <div class="filtros_orden">
            <select id="ordenarProyectos" class="orden_select">
              ${["destacado|Destacados","reciente|Más reciente","antiguo|Más antiguo","nombre|Por nombre"].map(e=>{const[t,i]=e.split("|");return`<option value="${t}">${i}</option>`}).join("")}
            </select>
          </div>
        </div>
        <div class="proyectos_grid" id="proyectosGrid"><div class="loading_grid"><i class="fas fa-spinner fa-spin"></i><p>Cargando proyectos...</p></div></div>
        <div class="no_resultados" style="display:none;"><i class="fas fa-search"></i><h3>No se encontraron proyectos</h3><p>Intenta con otros términos de búsqueda</p></div>
        <div class="load_more_section" id="loadMoreSection" style="display:none;">
          <button class="btn_load_more" id="btnLoadMore"><i class="fas fa-plus-circle"></i><span>Mostrar Más</span></button>
        </div>
      </section>
    </div>
    <div class="wiModal" id="modalProyecto">
      <div class="modalBody modal_proyecto_body">
        <button class="modalX"><i class="fas fa-times"></i></button>
        <div class="modal_proyecto_header"><h2 class="modal_titulo" id="modalTitulo">Agregar Proyecto</h2></div>
        <form class="modal_proyecto_form" id="formProyecto">
          <div class="form_row">
            <div class="form_group"><label><i class="fas fa-heading"></i> Título</label><input type="text" id="inputTitulo" class="form_input" placeholder="Ej: Mi Proyecto" required></div>
            <div class="form_group"><label><i class="fas fa-key"></i> ID</label><input type="text" id="inputId" class="form_input" placeholder="ej: mi-proyecto" required></div>
          </div>
          <div class="form_group"><label><i class="fas fa-link"></i> URL Proyecto</label><input type="url" id="inputUrl" class="form_input" placeholder="https://..." required></div>
          <div class="form_group"><label><i class="fas fa-image"></i> Imagen URL</label><input type="url" id="inputImg" class="form_input" placeholder="https://..." required></div>
          <div class="form_group"><label><i class="fas fa-align-left"></i> Descripción</label><textarea id="inputDescripcion" class="form_textarea" placeholder="Describe..." rows="3" required></textarea></div>
          <div class="form_row">
            <div class="form_group"><label><i class="fas fa-code"></i> Tecnologías</label><input type="text" id="inputTecnologias" class="form_input" placeholder="JS, React, CSS" required></div>
            <div class="form_group"><label><i class="fas fa-calendar"></i> Fecha</label><input type="date" id="inputFecha" class="form_input" required></div>
          </div>
          <div class="form_row">
            <div class="form_group">
              <label><i class="fas fa-folder"></i> Categoría</label>
              <select id="inputCategoria" class="form_select" required>
                <option value="">Seleccionar...</option>
                  ${["web|Web Apps","mobile|Mobile","windows|Windows","educacion|Educación","diseno|Diseño","devs|Devs","tools|Herramientas","camino|Camino"].map(e=>{const[t,i]=e.split("|");return`<option value="${t}">${i}</option>`}).join("")}
              </select>
            </div>
            <div class="form_group"><label class="destacado"><span><input type="checkbox" id="inputDestacado"> Destacado <i class="fas fa-star"></i></span></label></div>
          </div>
          <div class="modal_acciones">
            <button type="submit" class="btn_modal btn_guardar" id="btnGuardar"><i class="fas fa-save"></i> Guardar</button>
          </div>
        </form>
      </div>
    </div>
  `);const P=()=>{setTimeout(()=>{a("#destacadosGrid").html(I.map((e,t)=>`
        <a href="${e.url}" target="_blank" rel="noopener" class="proyecto_card" style="animation-delay:${t*.1}s">
          <div class="project_img"><img src="${e.img}" alt="${e.titulo}" loading="lazy"><div class="project_overlay"><i class="fas fa-external-link-alt"></i></div></div>
          <div class="project_info"><h3 class="project_title">${e.titulo}</h3><p class="project_desc">${e.descripcion}</p><div class="project_tags">${e.tags.slice(0,3).map(i=>`<span class="tag">${i}</span>`).join("")}</div></div>
        </a>
      `).join("")),setTimeout(()=>a(".proyecto_card").addClass("visible"),50)},800)},o=(e=u,t=!1)=>{const i=a("#proyectosGrid");if(t&&(i.empty(),h=0,x&&i.append('<div class="proyecto_card card_agregar" id="cardAgregar"><div class="agregar_content"><div class="agregar_icon"><i class="fas fa-plus"></i></div><h3>Agregar</h3><p>Nuevo proyecto</p></div></div>')),!d.length){a(".no_resultados").fadeIn(200),a("#loadMoreSection").hide();return}a(".no_resultados").hide(),d.slice(h,h+e).forEach((n,y)=>{i.append(`
        <div class="proyecto_card" data-id="${n.id}" style="animation-delay:${y*.05}s">
          <div class="project_img">
            <img src="${n.img}" alt="${n.titulo}" loading="lazy">
            <div class="project_overlay">
              <a href="${n.url}" target="_blank" rel="noopener" class="btn_overlay" title="Abrir"><i class="fas fa-external-link-alt"></i></a>
              ${x?`<button class="btn_overlay btn_editar" data-id="${n.id}" title="Editar"><i class="fas fa-edit"></i></button><button class="btn_overlay btn_eliminar" data-id="${n.id}" title="Eliminar"><i class="fas fa-trash"></i></button>`:""}
            </div>
            ${n.destacado?'<div class="badge_destacado"><i class="fas fa-star"></i></div>':""}
          </div>
          <div class="project_info"><h3 class="project_title">${n.titulo}</h3><p class="project_desc">${n.descripcion}</p><div class="project_tags">${(n.tecnologias||[]).slice(0,3).map(k=>`<span class="tag">${k}</span>`).join("")}</div></div>
        </div>
      `)}),setTimeout(()=>i.find(".proyecto_card:not(.visible)").addClass("visible"),50),h+=e,h<d.length?a("#loadMoreSection").fadeIn(200):a("#loadMoreSection").fadeOut(200)},r=async(e=!1)=>{if(!e){const t=($(c)||{}).data||[];if(t.length){m=d=t,o(u,!0);return}}try{m=d=(await(async()=>{try{return await R(F(N(v,"proyectos"),na("creadoEn","desc")))}catch{return await R(N(v,"proyectos"))}})()).docs.map(i=>({id:i.id,...i.data()})),o(u,!0),W(c,{data:m,ts:Date.now()},24),a("#buscarProyecto").attr("placeholder",`Buscar en ${m.length} proyectos...`)}catch(t){m.length||a(".loading_grid").html('<i class="fas fa-exclamation-triangle"></i><p>Error al cargar</p>'),console.error("❌",t)}};ca(".h1pro",()=>{x=!0,a(".wiauth").removeClass("dpn").addClass("dfc"),o(u,!0),M("¡Dios te Ama!","success")},7),a(document).on("click","#cardAgregar",()=>{a("#formProyecto")[0].reset(),a("#formProyecto").removeData("editId"),a("#modalTitulo").text("Agregar Nuevo Proyecto"),a("#inputFecha").val(new Date().toISOString().split("T")[0]),a("#inputDestacado").prop("checked",!1),a("#inputId").prop("readonly",!1),E("modalProyecto")}),a(document).on("click",".btn_editar",function(e){e.stopPropagation();const t=m.find(i=>i.id===a(this).data("id"));if(!t)return D("No encontrado","error");a("#modalTitulo").text("Editar Proyecto"),a("#inputTitulo").val(t.titulo),a("#inputDescripcion").val(t.descripcion),a("#inputImg").val(t.img),a("#inputUrl").val(t.url),a("#inputCategoria").val(t.categoria),a("#inputFecha").val(O(t.fechaProyecto||t.creadoEn)),a("#inputTecnologias").val((t.tecnologias||[]).join(", ")),a("#inputId").val(t.id).prop("readonly",!0),a("#inputDestacado").prop("checked",!!t.destacado),a("#formProyecto").data("editId",t.id),E("modalProyecto")}),a("#formProyecto").on("submit",async function(e){e.preventDefault();const t=a(this).data("editId"),i=a("#btnGuardar"),n=t||`${a("#inputId").val().trim().toLowerCase().replace(/\s+/g,"-")}_${Date.now()}`,y={titulo:a("#inputTitulo").val().trim(),descripcion:a("#inputDescripcion").val().trim(),img:a("#inputImg").val().trim(),url:a("#inputUrl").val().trim(),categoria:a("#inputCategoria").val(),tecnologias:f(a("#inputTecnologias").val()),destacado:a("#inputDestacado").is(":checked"),fechaProyecto:s(a("#inputFecha").val())};if(!y.titulo||!y.descripcion||!n)return D("Completa los campos","warning");_(i);const k=z(),Y={...y,UpdateEn:k};t||(Y.creadoEn=k);try{await L(w(v,"proyectos",n),Y,{merge:!0}),D(t?"Actualizado ✓":"Creado ✓","success"),await r(!0),S("modalProyecto")}catch(H){console.error("❌",H),D("Error al guardar","error")}finally{_(i,!1)}}),a(document).on("click",".btn_eliminar",async function(e){if(e.stopPropagation(),!!confirm("¿Eliminar este proyecto?"))try{await ra(w(v,"proyectos",a(this).data("id"))),D("Eliminado ✓","success"),await r(!0)}catch{D("Error al eliminar","error")}});let l;a("#buscarProyecto").on("input",function(){const e=p(a(this).val().trim());a("#clearSearch").toggle(!!e),clearTimeout(l),l=setTimeout(()=>{d=e?m.filter(t=>[t.titulo,t.descripcion,...t.tecnologias||[]].some(i=>p(i).includes(e))):[...m],o(u,!0)},220)}),a("#clearSearch").on("click",()=>a("#buscarProyecto").val("").trigger("input").focus()),a(".filtro_btn").on("click",function(){const e=a(this).data("categoria"),t=p(a("#buscarProyecto").val().trim());a(".filtro_btn").removeClass("active"),a(this).addClass("active");let i=e==="all"?m:m.filter(n=>n.categoria===e);d=t?i.filter(n=>[n.titulo,n.descripcion,...n.tecnologias||[]].some(y=>p(y).includes(t))):i,o(u,!0)}),a("#ordenarProyectos").on("change",function(){const e={reciente:(t,i)=>new Date(i.fechaProyecto?.toDate?.()||i.UpdateEn?.toDate?.()||0)-new Date(t.fechaProyecto?.toDate?.()||t.UpdateEn?.toDate?.()||0),antiguo:(t,i)=>new Date(t.fechaProyecto?.toDate?.()||t.UpdateEn?.toDate?.()||0)-new Date(i.fechaProyecto?.toDate?.()||i.UpdateEn?.toDate?.()||0),nombre:(t,i)=>t.titulo.localeCompare(i.titulo),destacado:(t,i)=>(i.destacado|0)-(t.destacado|0)};d.sort(e[a(this).val()]||(()=>0)),o(u,!0)}),a("#btnLoadMore").on("click",()=>{o(g);const e=a("#proyectosGrid .proyecto_card").last();e.length&&e.offset()&&a("html, body").animate({scrollTop:e.offset().top-100},350)}),da(".proyectos_hero",()=>a(".proyectos_hero").addClass("visible")),P(),r().then(()=>{d.sort((e,t)=>(t.destacado|0)-(e.destacado|0)),o(u,!0)}),console.log("✅ Proyectos completado")};export{ya as proyectos};
